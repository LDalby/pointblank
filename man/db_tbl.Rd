% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tbl_from_db.R
\name{db_tbl}
\alias{db_tbl}
\title{Get a table from a database}
\usage{
db_tbl(db, dbname, table, user, password, host = NULL, port = NULL)
}
\arguments{
\item{db}{Either an appropriate driver function (e.g.,
\code{RPostgres::Postgres()}) or a shorthand name for the database type. Valid
names are: \code{"postgresql"}, \code{"postgres"}, or \code{"pgsql"} (PostgreSQL, using
the \code{RPostgres::Postgres()} driver function); \code{"mysql"} (MySQL, using
\code{RMySQL::MySQL()}); \code{"maria"} or \code{"mariadb"} (MariaDB, using
\code{RMariaDB::MariaDB()}); \code{"duckdb"} (DuckDB, using \code{duckdb::duckdb()}); and
\code{"sqlite"} (SQLite, using \code{RSQLite::SQLite()}).}

\item{dbname}{The database name.}

\item{table}{The name of the table, or, a reference to a table in a schema
(two-element vector with the names of schema and table). Alternatively,
this can be supplied as a data table to copy into an in-memory database
connection. This only works if: (1) the \code{db} is either \code{"sqlite"} or
\code{"duckdb"}, (2) the \code{dbname} was chosen as \code{":memory:"}, and (3) the
\code{data_tbl} is a data frame or a tibble object.}

\item{user, password}{The environment variables used to access the username
and password for the database.}

\item{host, port}{The database host and optional port number.}
}
\value{
A \code{tbl_dbi} object.
}
\description{
If your target table is in a database, the \code{db_tbl()} function
is a handy way of accessing it. This function simplifies the process of
getting a \code{tbl_dbi} object, which usually involves a combination of building
a connection to a database and using the \code{dplyr::tbl()} function with the
connection and the table name (or a reference to a table in a schema). A
better option is to use this function as the \code{read_fn} parameter in
\code{\link[=create_agent]{create_agent()}} and \code{\link[=create_informant]{create_informant()}}. This can be done by using a
leading \code{~} (e.g,. \code{read_fn = ~db_tbl(...)}).

The username and password are supplied though environment variables. If
desired, these can be supplied directly by enclosing those values in \code{I()}.
}
\section{Function ID}{

1-6
}

\examples{
# You can use an in-memory database
# table and supply an in-memory table
# to it too:
# small_table_duckdb <- 
#   pointblank::db_tbl(
#     db = "duckdb",
#     dbname = ":memory:",
#     table = small_table
#   )

# It's also possible to obtain a remote
# file and shove it into an in-memory
# database; use the all-powerful `file_tbl()`
# + `db_tbl()` combo
# all_revenue_large_duckdb <-
#   db_tbl(
#     db = "duckdb",
#     dbname = ":memory:",
#     table = file_tbl(
#       file = from_github(
#         file = "all_revenue_large.rds",
#         repo = "rich-iannone/intendo",
#         subdir = "data-large"
#       )
#     )
#   )

# For remote databases, it's just as
# simple (I think); you can get access
# to the `rna` table that's in the
# RNA Central public database with the
# following `db_tbl()` call
# rna_db_tbl <- 
#   db_tbl(
#     db = "postgres", 
#     dbname = "pfmegrnargs",
#     table = "rna",
#     user = I("reader"),
#     password = I("NWDMCE5xdipIjRrp"),
#     host = "hh-pgsql-public.ebi.ac.uk",
#     port = 5432
#   )

# Using `I()` for the user name and
# password means that you're passing in
# the actual values but, normally, you
# would use names of environment variables
# (envvars) to access the username and
# password values when connecting to a
# database... like this:
# example_db_tbl <- 
#   db_tbl(
#     db = "<database_shortcode>", 
#     dbname = "<database_name>",
#     table = "<table_name>",
#     user = "<DB_USER_NAME>",
#     password = "<DB_PASSWORD>",
#     host = "<connection_url>",
#     port = "<connection_port>"
#   )

# Environment variables can be created
# by editing the user `.Renviron` file and
# the `usethis::edit_r_environ()` function
# makes this pretty easy to do

}
\seealso{
Other Planning and Prep: 
\code{\link{action_levels}()},
\code{\link{create_agent}()},
\code{\link{create_informant}()},
\code{\link{file_tbl}()},
\code{\link{scan_data}()},
\code{\link{validate_rmd}()}
}
\concept{Planning and Prep}
