<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Validation of Local and Remote Data Tables • pointblank</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Validation of Local and Remote Data Tables">
<meta property="og:description" content="Validate data in data frames, tibble objects, Spark
    DataFrames, and database tables (e.g., PostgreSQL and MySQL).
    Validation pipelines can be made using easily-readable, consecutive
    validation steps. Upon execution of the validation plan, several reporting
    options are available. User-defined thresholds for failure rates allow for
    the determination of appropriate reporting actions. Many other workflows are
    available including an information management workflow, where the aim is to
    record, collect, and generate useful information on data tables.">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pointblank</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">0.5.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/intro-to-pointblank.html">Intro</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rich-iannone/pointblank">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div align="center">

<p><br></p>
<p><a href="https://cran.r-project.org/package=pointblank"><img src="https://www.r-pkg.org/badges/version/pointblank" alt="CRAN status"></a> <a href="https://CRAN.R-project.org/package=pointblank"><img src="https://cranlogs.r-pkg.org/badges/pointblank" alt="downloads"></a></p>
<p><a href="https://github.com/rich-iannone/pointblank/actions"><img src="https://github.com/rich-iannone/pointblank/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://codecov.io/gh/rich-iannone/pointblank?branch=master"><img src="https://codecov.io/gh/rich-iannone/pointblank/branch/master/graph/badge.svg" alt="Coverage status"></a></p>
<p><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></p>
<br>
</div>
<p>With the <strong>pointblank</strong> package it’s really easy to methodically validate your data whether in the form of data frames or as database tables. On top of the validation toolset, the package gives you the means to define and keep current with the information that <em>defines</em> your tables.</p>
<p>For table <em>validation</em>, the <em>agent</em> object works with a large collection of simple (yet powerful!) validation functions. We can enable much more sophisticated validation checks by using custom expressions and also through stepwise mutation of the target table (through something we call <code>preconditions</code>).</p>
<p>Sometimes we want to maintain table <em>information</em> and update it when the table goes through changes. For that, we can use an <em>informant</em> object + associated functions to help define the metadata entries and present it in a way that suits you.</p>
<hr>
<p><img src="reference/figures/data_quality_reporting_workflow.png"></p>
<div id="table-validations-with-an-agent-and-its-detailed-reporting" class="section level5">
<h5 class="hasAnchor">
<a href="#table-validations-with-an-agent-and-its-detailed-reporting" class="anchor"></a>TABLE VALIDATIONS WITH AN AGENT AND ITS DETAILED REPORTING</h5>
<p>Data validation can be carried out in <em>data quality reporting</em> workflow, ultimately resulting in the production of of a data quality analysis report. This is most useful in a non-interactive mode where data quality for database tables and on-disk data files must be periodically checked. The <strong>pointblank</strong> <em>agent</em> is given a collection of validation functions to define validation steps. We can get extracts of data rows that failed validation, set up custom functions that are invoked by exceeding set threshold failure rates, etc. Want to email the report regularly (or, only if certain conditions are met)? Yep, you can do all that.</p>
<p>Here is an example of how to use <strong>pointblank</strong> to validate a local table with an agent.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co"># Generate a simple `action_levels` object to</span>
<span class="co"># set the `warn` state if a validation step</span>
<span class="co"># has a single 'fail' test unit</span>
<span class="va">al</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/action_levels.html">action_levels</a></span><span class="op">(</span>warn_at <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="co"># Create a pointblank `agent` object, with the</span>
<span class="co"># tibble as the target table. Use three validation</span>
<span class="co"># functions, then, `interrogate()`. The agent will</span>
<span class="co"># then have some useful intel.</span>
<span class="va">agent</span> <span class="op">&lt;-</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="cn">NA</span>, <span class="fl">7</span><span class="op">)</span>,
    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">6</span>,  <span class="fl">0</span>, <span class="fl">7</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/create_agent.html">create_agent</a></span><span class="op">(</span>
    label <span class="op">=</span> <span class="st">"A very *simple* example."</span>,
    actions <span class="op">=</span> <span class="va">al</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_vals_between.html">col_vals_between</a></span><span class="op">(</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">9</span>,
    na_pass <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_vals_lt.html">col_vals_lt</a></span><span class="op">(</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span>, <span class="fl">12</span>,
    preconditions <span class="op">=</span> <span class="op">~</span> <span class="va">.</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>c <span class="op">=</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_is_numeric.html">col_is_numeric</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/interrogate.html">interrogate</a></span><span class="op">(</span><span class="op">)</span></pre></div>
<p>The <strong>pointblank</strong> package is designed to be both straightforward yet powerful. And fast! Local data frames don’t take very long to validate extensively and all validation checks on remote tables are done entirely in-database. So we can add dozens or even hundreds of validation steps without any long waits for reporting.</p>
<p>Should you want to perform validation checks on database or <em>Spark</em> tables, provide a <code>tbl_dbi</code> or <code>tbl_spark</code> object to <code><a href="reference/create_agent.html">create_agent()</a></code>. The <strong>pointblank</strong> package currently supports <em>PostgreSQL</em>. <em>MySQL</em>, <em>MariaDB</em>, <em>DuckDB</em>, <em>SQLite</em>, and <em>Spark DataFrames</em> (through the <strong>sparklyr</strong> package). The <code><a href="reference/db_tbl.html">db_tbl()</a></code> function is provided by <strong>pointblank</strong> to make accessing a DB table insanely easy.</p>
<p>The reporting’s pretty sweet. We can get a <strong>gt</strong>-based report by printing an <em>agent</em>.</p>
<p><img src="reference/figures/agent_report.png"></p>
<hr>
<p><img src="reference/figures/pipeline_based_data_validations.png"></p>
</div>
<div id="validations-directly-on-data" class="section level5">
<h5 class="hasAnchor">
<a href="#validations-directly-on-data" class="anchor"></a>VALIDATIONS DIRECTLY ON DATA</h5>
<p>We can perform pipeline-based data validations using the same collection of validation functions. This is useful for an ETL process where and we directly operate on data and trigger warnings, raise errors, or write out logs when exceeding specified failure thresholds. It’s a cinch to perform checks on import of the data and at key points during the transformation process, perhaps stopping everything if things are exceptionally bad with regard to data quality.</p>
<p>The following example uses the same three validation functions as before but, this time, we use them directly on the data! In this workflow, by default, an error will occur if there is a single ‘fail’ test unit in any validation step:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="cn">NA</span>, <span class="fl">7</span><span class="op">)</span>,
    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">6</span>,  <span class="fl">0</span>, <span class="fl">7</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_vals_between.html">col_vals_between</a></span><span class="op">(</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">9</span>,
    na_pass <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_vals_lt.html">col_vals_lt</a></span><span class="op">(</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span>, <span class="fl">12</span>,
    preconditions <span class="op">=</span> <span class="op">~</span> <span class="va">.</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>c <span class="op">=</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_is_numeric.html">col_is_numeric</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span><span class="op">)</span></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>Error<span class="op">:</span><span class="st"> </span>Exceedance of failed test units where values <span class="cf">in</span> <span class="st">`</span><span class="dt">c</span><span class="st">`</span> should have been <span class="op">&lt;</span><span class="st"> `</span><span class="dt">12</span><span class="st">`</span>.</span>
<span id="cb3-2"><a href="#cb3-2"></a>The <span class="st">`</span><span class="dt">col_vals_lt()</span><span class="st">`</span> validation failed beyond the absolute threshold <span class="kw">level</span> (<span class="dv">1</span>).</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="op">*</span><span class="st"> </span>failure <span class="kw">level</span> (<span class="dv">2</span>) <span class="op">&gt;=</span><span class="st"> </span>failure <span class="kw">threshold</span> (<span class="dv">1</span>) </span></code></pre></div>
<p>We can downgrade this to a warning with the <code><a href="reference/action_levels.html">warn_on_fail()</a></code> helper function (assigning to <code>actions</code>). In this way, the data will be returned, but warnings will appear.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co"># This `warn_on_fail()` function is a nice</span>
<span class="co"># shortcut for `action_levels(warn_at = 1)`;</span>
<span class="co"># it works great in this data checking workflow</span>
<span class="co"># (and the threshold can still be adjusted)</span>
<span class="va">al</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/action_levels.html">warn_on_fail</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="cn">NA</span>, <span class="fl">7</span><span class="op">)</span>,
    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">6</span>,  <span class="fl">0</span>, <span class="fl">7</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_vals_between.html">col_vals_between</a></span><span class="op">(</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">9</span>,
    na_pass <span class="op">=</span> <span class="cn">TRUE</span>,
    actions <span class="op">=</span> <span class="fu"><a href="reference/action_levels.html">warn_on_fail</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_vals_lt.html">col_vals_lt</a></span><span class="op">(</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span>, <span class="fl">12</span>,
    preconditions <span class="op">=</span> <span class="op">~</span> <span class="va">.</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>c <span class="op">=</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span><span class="op">)</span>,
    actions <span class="op">=</span> <span class="fu"><a href="reference/action_levels.html">warn_on_fail</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/col_is_numeric.html">col_is_numeric</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span><span class="op">)</span></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">#&gt; # A tibble: 6 x 2</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#&gt;       a     b</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; 1     5     6</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; 2     7     1</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; 3     6     0</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt; 4     5     6</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt; 5    NA     0</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt; 6     7     7</span></span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a>Warning message<span class="op">:</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>Exceedance of failed test units where values <span class="cf">in</span> <span class="st">`</span><span class="dt">c</span><span class="st">`</span> should have been <span class="op">&lt;</span><span class="st"> `</span><span class="dt">12</span><span class="st">`</span>.</span>
<span id="cb5-13"><a href="#cb5-13"></a>The <span class="st">`</span><span class="dt">col_vals_lt()</span><span class="st">`</span> validation failed beyond the absolute threshold <span class="kw">level</span> (<span class="dv">1</span>).</span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="op">*</span><span class="st"> </span>failure <span class="kw">level</span> (<span class="dv">2</span>) <span class="op">&gt;=</span><span class="st"> </span>failure <span class="kw">threshold</span> (<span class="dv">1</span>) </span></code></pre></div>
<p>Should you need more fine-grained thresholds and resultant actions, the <code><a href="reference/action_levels.html">action_levels()</a></code> function can be used to specify multiple failure thresholds and side effects for each failure state. However, the <code><a href="reference/action_levels.html">warn_on_fail()</a></code> and <code><a href="reference/action_levels.html">stop_on_fail()</a></code> (applied by default, with <code>stop_at = 1</code>) helpers should in most cases suffice for this workflow.</p>
<hr>
</div>
<div id="validations-in-r-markdown-documents" class="section level5">
<h5 class="hasAnchor">
<a href="#validations-in-r-markdown-documents" class="anchor"></a>VALIDATIONS IN R MARKDOWN DOCUMENTS</h5>
<p>Using <strong>pointblank</strong> in an R Markdown workflow is enabled by default once the <strong>pointblank</strong> library is loaded. The framework allows for validation testing within specialized validation code chunks where the <code>validate = TRUE</code> option is set. Using <strong>pointblank</strong> validation functions on data in these marked code chunks will flag overall failure if the stop threshold is exceeded anywhere. All errors are reported in the validation code chunk after rendering the document to HTML, where green or red status buttons indicate whether all validations succeeded or failures occurred. Click them to reveal the otherwise hidden validation statements and any associated error messages.</p>
<p align="center">
</p>
<p><img src="reference/figures/pointblank_rmarkdown.png" width="100%" style="border:2px solid #021a40;"></p>

<p>The above R Markdown document is available as a template in the RStudio IDE (it’s called <code>Pointblank Validation</code>). Try it out!</p>
<hr>
</div>
<div id="table-scans" class="section level5">
<h5 class="hasAnchor">
<a href="#table-scans" class="anchor"></a>TABLE SCANS</h5>
<p>While data validation is important, one has to be familiar with the data first. To that end, the <code><a href="reference/scan_data.html">scan_data()</a></code> function is provided in <strong>pointblank</strong> for generating a comprehensive summary of a tabular dataset. The report content is customizable, can be used inside an R Markdown document, and (as with the validation report) it can be produced in eight different languages: <em>English</em>, <em>French</em>, <em>German</em>, <em>Italian</em>, <em>Spanish</em>, <em>Portuguese</em>, <em>Chinese</em> (China mainland), and <em>Russian</em>. Here are several published examples of a <strong>Table Scan</strong> for each of these languages using the <code><a href="https://dplyr.tidyverse.org/reference/storms.html">dplyr::storms</a></code> dataset. Clicking any of these will take you to a highly interactive <strong>RPubs</strong> document.</p>
<p><a href="https://rpubs.com/rich_i/pointblank_storms_english"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=English&amp;color=blue" alt="Table Scan in English"></a>    <a href="https://rpubs.com/rich_i/pointblank_storms_french"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=French&amp;color=blue" alt="Table Scan in French"></a>    <a href="https://rpubs.com/rich_i/pointblank_storms_german"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=German&amp;color=blue" alt="Table Scan in German"></a>    <a href="https://rpubs.com/rich_i/pointblank_storms_italian"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=Italian&amp;color=blue" alt="Table Scan in Italian"></a>    <a href="https://rpubs.com/rich_i/pointblank_storms_spanish"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=Spanish&amp;color=blue" alt="Table Scan in Spanish"></a>    <a href="https://rpubs.com/rich_i/pointblank_storms_portuguese"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=Portuguese&amp;color=blue" alt="Table Scan in Portuguese"></a>    <a href="https://rpubs.com/rich_i/pointblank_storms_chinese"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=Chinese&amp;color=blue" alt="Table Scan in Chinese"></a>    <a href="https://rpubs.com/rich_i/pointblank_storms_russian"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=Russian&amp;color=blue" alt="Table Scan in Russian"></a>   </p>
<p>Database tables can be used with <code><a href="reference/scan_data.html">scan_data()</a></code> as well. Here are two examples using the <code>full_region</code> table of the <strong>Rfam</strong> database (hosted publicly at “mysql-rfam-public.ebi.ac.uk”) and the <code>assembly</code> table of the <strong>Ensembl</strong> database (hosted publicly at “ensembldb.ensembl.org”).</p>
<p><a href="https://rpubs.com/rich_i/rfam_full_region"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=Rfam:%20full_region&amp;color=green" alt="Rfam: full_region"></a>    <a href="https://rpubs.com/rich_i/ensembl_assembly"><img src="https://img.shields.io/static/v1?label=Table%20Scan&amp;message=Ensembl:%20assembly&amp;color=green" alt="Ensembl: assembly"></a></p>
<hr>
</div>
<div id="package-functions" class="section level5">
<h5 class="hasAnchor">
<a href="#package-functions" class="anchor"></a>PACKAGE FUNCTIONS</h5>
<p>There are many functions available in <strong>pointblank</strong> for making comprehensive table validations. Each validation function is associated with an expectation function (of the form <code>expect_*()</code>). They are equivalent in usage and behavior to <strong>testthat</strong> tests with the big distinction that they check aspects of data tables (and not the results of function calls). Furthermore, each validation function has an associated test function (of the form <code>test_*()</code>) which always returns a logical value (<code>TRUE</code> or <code>FALSE</code>).</p>
<p align="center">
</p>
<p><img src="reference/figures/pointblank_functions.svg" width="100%"></p>

<hr>
</div>
<div id="installation" class="section level5">
<h5 class="hasAnchor">
<a href="#installation" class="anchor"></a>INSTALLATION</h5>
<p>Want to try this out? The <strong>pointblank</strong> package is available on <strong>CRAN</strong>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"pointblank"</span><span class="op">)</span></pre></div>
<p>You can also install the development version of <strong>pointblank</strong> from <strong>GitHub</strong>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"rich-iannone/pointblank"</span><span class="op">)</span></pre></div>
<p>If you encounter a bug, have usage questions, or want to share ideas to make this package better, feel free to file an <a href="https://github.com/rich-iannone/pointblank/issues">issue</a>.</p>
<hr>
</div>
<div id="how-pointblank-fits-in-with-other-packages-that-validate-tabular-data" class="section level5">
<h5 class="hasAnchor">
<a href="#how-pointblank-fits-in-with-other-packages-that-validate-tabular-data" class="anchor"></a>How <strong>pointblank</strong> Fits in with Other Packages that Validate Tabular Data</h5>
<p>The <strong>pointblank</strong> package isn’t the only one of its kind available for <strong>R</strong>. The reason for introducing yet another has to do with <strong>pointblank</strong>’s goals:</p>
<ul>
<li>ability to work with local tables, database tables, and Spark DataFrames (via <strong>sparklyr</strong>) with minimal changes in the API</li>
<li>great flexibility in data validation workflows, allowing for: (1) report-based validations, (2) inline validations, (3) validation of data tables in unit tests (with the set of <code>expect_*()</code> functions), and (4) validation of data tables to support conditional expressions (with the set of <code>test_*()</code> functions)</li>
<li>enabling a workflow for collecting and reporting on useful information about your data tables</li>
<li>extra tools for understanding new datasets (<code><a href="reference/scan_data.html">scan_data()</a></code>) and validating data in specialized R Markdown code chunks (<code><a href="reference/validate_rmd.html">validate_rmd()</a></code>)</li>
<li>reporting outputs translated to multiple spoken languages</li>
<li>developing an API that closely follows tidyverse conventions by adhering to the <a href="https://style.tidyverse.org">tidyverse style guide</a>
</li>
<li>lots of attention on making the package documentation and examples the best they can be</li>
</ul>
<p>While <strong>pointblank</strong> is trying to do something different, it may not suit your specific needs. Here is a listing of some other validation <strong>R</strong> packages:</p>
<p><strong>assertr</strong> (<a href="https://github.com/ropensci/assertr">GITHUB</a>, <a href="https://docs.ropensci.org/assertr">WEBSITE</a>)</p>
<p><strong>validate</strong> (<a href="https://github.com/data-cleaning/validate">GITHUB</a>)</p>
<p><strong>dataMaid</strong> (<a href="https://github.com/ekstroem/dataMaid">GITHUB</a>)</p>
<hr>
</div>
<div id="code-of-conduct" class="section level5">
<h5 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h5>
<p>Please note that the pointblank project is released with a <a href="https://www.contributor-covenant.org/version/1/0/0/code-of-conduct/">Contributor Code of Conduct</a>.<br>By participating in this project you agree to abide by its terms.</p>
</div>
<div id="license" class="section level5">
<h5 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h5>
<p>MIT © Richard Iannone</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=pointblank">https://​cloud.r-project.org/​package=pointblank</a>
</li>
<li>Browse source code at <br><a href="https://github.com/rich-iannone/pointblank/">https://​github.com/​rich-iannone/​pointblank/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/rich-iannone/pointblank/issues">https://​github.com/​rich-iannone/​pointblank/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Richard Iannone <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3925-190X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Mauricio Vargas <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-1017-7574" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://rich-iannone.github.io/pointblank/"><img src="reference/figures/logo.svg" height="350px"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Richard Iannone, Mauricio Vargas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
