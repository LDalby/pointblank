<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Define a store of tables with table-prep formulas — tbl_store • pointblank</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Define a store of tables with table-prep formulas — tbl_store" />
<meta property="og:description" content="It can be useful to set up all the data sources you need and just draw from
them when necessary. This upfront configuration with tbl_store() can be
quite useful since we can define the methods for obtaining tabular data from
mixed sources (e.g., database tables, tables generated from flat files, etc.)
and provide names for these data pulling procedures as a way to access the
data with tbl_get(). Data preparation could be a part of what's in the
store (imagine procuring several mutated variations of the same source table
or pre-filtering a database table according to the system time). Another nice
aspect of organizing table-prep formulas in a single object is supplying
it to the read_fn argument of create_agent() or create_informant() via
$ notation (e.g, create_agent(read_fn = &amp;lt;tbl_store&amp;gt;$&amp;lt;name&amp;gt;))." />
<meta property="og:image" content="/logo.svg" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pointblank</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">0.6.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Validation Workflows</li>
    <li>
      <a href="../articles/validation_workflows.html">Overview</a>
    </li>
    <li>
      <a href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a>
    </li>
    <li>
      <a href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a>
    </li>
    <li>
      <a href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a>
    </li>
    <li>
      <a href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a>
    </li>
    <li>
      <a href="../articles/VALID-V.html">VALID-V: Table Scan</a>
    </li>
    <li>
      <a href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a>
    </li>
    <li class="dropdown-header">Information Management</li>
    <li>
      <a href="../articles/INFO-1.html">Intro to Information Management</a>
    </li>
    <li>
      <a href="../articles/INFO-2.html">Advanced Information Management</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rich-iannone/pointblank/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define a store of tables with table-prep formulas</h1>
    <small class="dont-index">Source: <a href='https://github.com/rich-iannone/pointblank/blob/master/R/tbl_store.R'><code>R/tbl_store.R</code></a></small>
    <div class="hidden name"><code>tbl_store.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>It can be useful to set up all the data sources you need and just draw from
them when necessary. This upfront configuration with <code>tbl_store()</code> can be
quite useful since we can define the methods for obtaining tabular data from
mixed sources (e.g., database tables, tables generated from flat files, etc.)
and provide names for these data pulling procedures as a way to access the
data with <code><a href='tbl_get.html'>tbl_get()</a></code>. Data preparation could be a part of what's in the
store (imagine procuring several mutated variations of the same source table
or pre-filtering a database table according to the system time). Another nice
aspect of organizing table-prep formulas in a single object is supplying
it to the <code>read_fn</code> argument of <code><a href='create_agent.html'>create_agent()</a></code> or <code><a href='create_informant.html'>create_informant()</a></code> via
<code><a href='https://rdrr.io/r/base/Extract.html'>$</a></code> notation (e.g, <code>create_agent(read_fn = &lt;tbl_store&gt;$&lt;name&gt;)</code>).</p>
    </div>

    <pre class="usage"><span class='fu'>tbl_store</span><span class='op'>(</span><span class='va'>...</span>, .list <span class='op'>=</span> <span class='fu'>list2</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Expressions that contain table-prep formulas and table names for
data retrieval. Two-sided formulas (e.g, <code>&lt;LHS&gt; ~ &lt;RHS&gt;</code>) are to be used,
where the left-hand side is a given name and the right-hand is the portion
that is is used to obtain the table.</p></td>
    </tr>
    <tr>
      <th>.list</th>
      <td><p>Allows for the use of a list as an input alternative to <code>...</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>tbl_store</code> object that contains table-prep formulas.</p>
    <h2 class="hasAnchor" id="function-id"><a class="anchor" href="#function-id"></a>Function ID</h2>

    

<p>1-8</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other Planning and Prep: 
<code><a href='action_levels.html'>action_levels</a>()</code>,
<code><a href='create_agent.html'>create_agent</a>()</code>,
<code><a href='create_informant.html'>create_informant</a>()</code>,
<code><a href='db_tbl.html'>db_tbl</a>()</code>,
<code><a href='file_tbl.html'>file_tbl</a>()</code>,
<code><a href='scan_data.html'>scan_data</a>()</code>,
<code><a href='tbl_get.html'>tbl_get</a>()</code>,
<code><a href='tbl_source.html'>tbl_source</a>()</code>,
<code><a href='validate_rmd.html'>validate_rmd</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Define a `tbl_store` object by adding</span>
<span class='co'># table-prep formulas inside the</span>
<span class='co'># `tbl_store()` call</span>
<span class='co'># tbls &lt;- </span>
<span class='co'>#   tbl_store(</span>
<span class='co'>#     small_table_duck ~ db_tbl(</span>
<span class='co'>#       table = small_table,</span>
<span class='co'>#       dbname = ":memory:",</span>
<span class='co'>#       dbtype = "duckdb"</span>
<span class='co'>#     ),</span>
<span class='co'>#     ~ db_tbl(</span>
<span class='co'>#       table = "rna",</span>
<span class='co'>#       dbname = "pfmegrnargs",</span>
<span class='co'>#       dbtype = "postgres",</span>
<span class='co'>#       host = "hh-pgsql-public.ebi.ac.uk",</span>
<span class='co'>#       port = 5432,</span>
<span class='co'>#       user = I("reader"),</span>
<span class='co'>#       password = I("NWDMCE5xdipIjRrp")</span>
<span class='co'>#     ),</span>
<span class='co'>#     all_revenue ~ db_tbl(</span>
<span class='co'>#       table = file_tbl(</span>
<span class='co'>#         file = from_github(</span>
<span class='co'>#           file = "all_revenue_large.rds",</span>
<span class='co'>#           repo = "rich-iannone/intendo",</span>
<span class='co'>#           subdir = "data-large"</span>
<span class='co'>#         )</span>
<span class='co'>#       ),</span>
<span class='co'>#       dbname = ":memory:",</span>
<span class='co'>#       dbtype = "duckdb"</span>
<span class='co'>#     ),</span>
<span class='co'>#     sml_table ~ pointblank::small_table</span>
<span class='co'>#   )</span>

<span class='co'># Once this object is available, you can</span>
<span class='co'># check that the table of interest is</span>
<span class='co'># produced to your specification with the</span>
<span class='co'># `tbl_get()` function</span>
<span class='co'># tbl_get(</span>
<span class='co'>#   tbl = "small_table_duck",</span>
<span class='co'>#   store = tbls</span>
<span class='co'># )</span>

<span class='co'># Another simpler way to get the same</span>
<span class='co'># table materialized is by using `$` to</span>
<span class='co'># get the entry of choice for `tbl_get()`</span>
<span class='co'># tbls$small_table_duck %&gt;% tbl_get()</span>

<span class='co'># Creating an agent is easy when all</span>
<span class='co'># table-prep formulas are encapsulated</span>
<span class='co'># in a `tbl_store` object; use `$` notation</span>
<span class='co'># to pass the appropriate procedure for</span>
<span class='co'># reading a table to the `read_fn` argument</span>
<span class='co'># agent &lt;-</span>
<span class='co'>#   create_agent(read_fn = tbls$small_table_duck)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Richard Iannone, Mauricio Vargas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


